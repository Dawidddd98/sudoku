<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sudoku</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background-color: #fff;
      color: #000;
      transition: background-color 0.3s, color 0.3s;
    }
    body.dark {
      background-color: #1e1e1e;
      color: #f0f0f0;
    }
    .container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 10px;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(9, 40px);
      gap: 1px;
      background: black;
    }
    .cell {
      width: 40px;
      height: 40px;
      background: white;
      color: black;
      line-height: 40px;
      text-align: center;
      font-size: 20px;
      cursor: pointer;
    }
    body.dark .cell {
      background: #333;
      color: white;
    }
    .cell.selected {
      background-color: #a2d2ff;
    }
    body.dark .cell.selected {
      background-color: #555;
    }
    .cell.incorrect {
      background-color: #ff7b7b !important;
    }
    body.dark .cell.incorrect {
      background-color: #cc4444 !important;
    }
    .numbers {
      display: grid;
      grid-template-columns: repeat(3, 40px);
      gap: 10px;
    }
    .num-btn {
      width: 40px;
      height: 40px;
      font-size: 18px;
      cursor: pointer;
    }
    body.dark .num-btn {
      background-color: #444;
      color: white;
      border: 1px solid #777;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      max-width: 700px;
      margin: 0 auto;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
    }
    select, button {
      padding: 5px;
      font-size: 14px;
    }
    label {
      margin: 0 5px;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <div>
      <label for="language">üåê</label>
      <select id="language">
        <option value="pl">Polski</option>
        <option value="en">English</option>
        <option value="fr">Fran√ßais</option>
        <option value="es">Espa√±ol</option>
        <option value="it">Italiano</option>
        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
        <option value="pt">Portugu√™s</option>
      </select>
      <label id="difficulty-label" for="difficulty">Poziom:</label>
      <select id="difficulty">
        <option value="easy">≈Åatwy</option>
        <option value="medium">≈öredni</option>
        <option value="hard">Trudny</option>
      </select>
      <button id="newGame">Nowa gra</button>
    </div>
    <div>
      <label><input type="checkbox" id="themeToggle" /> üåô</label><br />
      ‚è± <span id="timer">00:00</span><br />
      ‚ùå <span id="errors">0</span>/3
    </div>
  </div>

  <div class="container">
    <div class="board" id="board"></div>
    <div class="numbers" id="numbers"></div>
  </div>

  <script>
    const langStrings = {
      pl: { newGame: "Nowa gra", difficulty: "Poziom", easy: "≈Åatwy", medium: "≈öredni", hard: "Trudny", loss: "Przegrana!", win: "Gratulacje!" },
      en: { newGame: "New Game", difficulty: "Difficulty", easy: "Easy", medium: "Medium", hard: "Hard", loss: "Game Over!", win: "You Win!" },
      fr: { newGame: "Nouvelle partie", difficulty: "Difficult√©", easy: "Facile", medium: "Moyen", hard: "Difficile", loss: "Perdu !", win: "F√©licitations !" },
      es: { newGame: "Nuevo juego", difficulty: "Dificultad", easy: "F√°cil", medium: "Medio", hard: "Dif√≠cil", loss: "¬°Perdiste!", win: "¬°Felicidades!" },
      it: { newGame: "Nuova partita", difficulty: "Difficolt√†", easy: "Facile", medium: "Medio", hard: "Difficile", loss: "Hai perso!", win: "Complimenti!" },
      ru: { newGame: "–ù–æ–≤–∞—è –∏–≥—Ä–∞", difficulty: "–°–ª–æ–∂–Ω–æ—Å—Ç—å", easy: "–õ—ë–≥–∫–∏–π", medium: "–°—Ä–µ–¥–Ω–∏–π", hard: "–¢—Ä—É–¥–Ω—ã–π", loss: "–ü–æ—Ä–∞–∂–µ–Ω–∏–µ!", win: "–í—ã –ø–æ–±–µ–¥–∏–ª–∏!" },
      pt: { newGame: "Novo jogo", difficulty: "Dificuldade", easy: "F√°cil", medium: "M√©dio", hard: "Dif√≠cil", loss: "Voc√™ perdeu!", win: "Parab√©ns!" }
    };

    const puzzles = {
      easy: {
        puzzle: [ '', '', 3, '', 2, '', 6, '', '',
                  9, '', '', 3, '', 5, '', '', 1,
                  '', '', 1, 8, '', 6, 4, '', '',
                  '', '', 8, 1, '', 2, 9, '', '',
                  7, '', '', '', '', '', '', '', 8,
                  '', '', 6, 7, '', 8, 2, '', '',
                  '', '', 2, 6, '', 9, 5, '', '',
                  8, '', '', 2, '', 3, '', '', 9,
                  '', '', 5, '', 1, '', 3, '', '' ],
        solution: [ 4,8,3,9,2,1,6,5,7,9,6,7,3,4,5,8,2,1,2,5,1,8,7,6,4,9,3,
                    5,4,8,1,3,2,9,7,6,7,2,9,5,6,4,1,3,8,1,3,6,7,9,8,2,4,5,
                    3,7,2,6,8,9,5,1,4,8,1,4,2,5,3,7,6,9,6,9,5,4,1,7,3,8,2 ]
      },
      medium: {
        puzzle: [ '', '', '', 2, 6, '', 7, '', 1,
                  6, 8, '', '', 7, '', '', 9, '',
                  1, 9, '', '', '', 4, 5, '', '',
                  8, 2, '', 1, '', '', '', 4, '',
                  '', '', 4, 6, '', 2, 9, '', '',
                  '', 5, '', '', '', 3, '', 2, 8,
                  '', '', 9, 3, '', '', '', 7, 4,
                  '', 4, '', '', 5, '', '', 3, 6,
                  7, '', 3, '', 1, 8, '', '', '' ],
        solution: [ 4,3,5,2,6,9,7,8,1,6,8,2,5,7,1,4,9,3,1,9,7,8,3,4,5,6,2,
                    8,2,6,1,9,5,3,4,7,3,7,4,6,8,2,9,1,5,9,5,1,7,4,3,6,2,8,
                    5,1,9,3,2,6,8,7,4,2,4,8,9,5,7,1,3,6,7,6,3,4,1,8,2,5,9 ]
      },
      hard: {
        puzzle: [ '', '', '', '', '', '', '', '', '',
                  '', '', '', '', '', 3, '', 8, 5,
                  '', '', 1, '', 2, '', '', '', '',
                  '', '', '', 5, '', 7, '', '', '',
                  '', '', 4, '', '', '', 1, '', '',
                  '', 9, '', '', '', '', '', '', '',
                  5, '', '', '', '', '', '', 7, 3,
                  '', '', 2, '', 1, '', '', '', '',
                  '', '', '', '', 4, '', '', '', 9 ],
        solution: [ 9,8,7,6,5,4,3,2,1,2,4,6,1,7,3,9,8,5,3,5,1,9,2,8,7,4,6,
                    1,2,8,5,3,7,6,9,4,6,3,4,8,9,2,1,5,7,7,9,5,4,6,1,8,3,2,
                    5,1,9,2,8,6,4,7,3,4,6,2,7,1,9,5,1,8,8,7,3,3,4,5,2,6,9 ]
      }
    };

    const board = document.getElementById('board');
    const numbers = document.getElementById('numbers');
    const errorDisplay = document.getElementById('errors');
    const timerDisplay = document.getElementById('timer');
    const newGameBtn = document.getElementById('newGame');
    const langSelect = document.getElementById('language');
    const difficultySelect = document.getElementById('difficulty');
    const difficultyLabel = document.getElementById('difficulty-label');
    const themeToggle = document.getElementById('themeToggle');

    let selectedCell = null;
    let errors = 0;
    let currentPuzzle = [];
    let currentSolution = [];
    let timer = 0;
    let timerInterval;
    let lang = 'pl';

    function startTimer() {
      clearInterval(timerInterval);
      timer = 0;
      timerInterval = setInterval(() => {
        timer++;
        const min = String(Math.floor(timer / 60)).padStart(2, '0');
        const sec = String(timer % 60).padStart(2, '0');
        timerDisplay.textContent = `${min}:${sec}`;
      }, 1000);
    }

    function loadPuzzle(level) {
      const { puzzle, solution } = puzzles[level];
      currentPuzzle = [...puzzle];
      currentSolution = [...solution];
      board.innerHTML = '';
      selectedCell = null;
      errors = 0;
      errorDisplay.textContent = "0";

      for (let i = 0; i < 81; i++) {
        const cell = document.createElement('div');
        cell.classList.add('cell');
        cell.dataset.index = i;

        if (puzzle[i] !== '') {
          cell.textContent = puzzle[i];
          cell.style.fontWeight = 'bold';
          cell.style.backgroundColor = '#eee';
        } else {
          cell.addEventListener('click', () => {
            if (selectedCell) selectedCell.classList.remove('selected');
            selectedCell = cell;
            selectedCell.classList.add('selected');
          });
        }

        board.appendChild(cell);
      }
    }

    function createNumberButtons() {
      numbers.innerHTML = '';
      for (let i = 1; i <= 9; i++) {
        const btn = document.createElement('button');
        btn.classList.add('num-btn');
        btn.textContent = i;
        btn.addEventListener('click', () => {
          if (!selectedCell) return;
          const index = parseInt(selectedCell.dataset.index);
          const correct = currentSolution[index];

          if (parseInt(i) === correct) {
            selectedCell.textContent = i;
            selectedCell.classList.remove('incorrect');
            selectedCell.classList.remove('selected');
            selectedCell = null;

            // check for win
            let isWin = true;
            for (let j = 0; j < 81; j++) {
              const c = board.children[j];
              if (c.textContent != currentSolution[j]) {
                isWin = false;
                break;
              }
            }
            if (isWin) {
              alert("üéâ " + (langStrings[lang].win || "You Win!"));
              clearInterval(timerInterval);
            }

          } else {
            selectedCell.classList.add('incorrect');
            errors++;
            errorDisplay.textContent = errors;
            if (errors >= 3) {
              alert(langStrings[lang].loss);
              numbers.innerHTML = '';
              clearInterval(timerInterval);
            }
          }
        });
        numbers.appendChild(btn);
      }
    }

    function translateUI() {
      const strings = langStrings[lang];
      newGameBtn.textContent = strings.newGame;
      difficultyLabel.textContent = strings.difficulty + ":";
      difficultySelect.options[0].textContent = strings.easy;
      difficultySelect.options[1].textContent = strings.medium;
      difficultySelect.options[2].textContent = strings.hard;
    }

    langSelect.addEventListener('change', () => {
      lang = langSelect.value;
      translateUI();
    });

    newGameBtn.addEventListener('click', () => {
      const level = difficultySelect.value;
      translateUI();
      loadPuzzle(level);
      createNumberButtons();
      startTimer();
    });

    themeToggle.addEventListener('change', () => {
      document.body.classList.toggle('dark', themeToggle.checked);
    });

    // Init
    translateUI();
    loadPuzzle('easy');
    createNumberButtons();
    startTimer();
  </script>
</body>
</html>
