<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sudoku</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background-color: #fff;
      color: #000;
      transition: background-color 0.3s, color 0.3s;
    }
    body.dark {
      background-color: #1e1e1e;
      color: #f0f0f0;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      padding: 10px 20px;
      background: #eee;
    }
    body.dark .top-bar {
      background: #2a2a2a;
    }
    select, button {
      font-size: 14px;
      padding: 5px;
    }

    .game-container {
      display: flex;
      justify-content: center;
      margin-top: 40px;
      gap: 40px;
      flex-wrap: wrap;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(9, 80px);
      background: black;
    }

    .cell {
      width: 80px;
      height: 80px;
      background: white;
      color: black;
      line-height: 80px;
      text-align: center;
      font-size: 28px;
      cursor: pointer;
      border: 1px solid #999;
    }

    body.dark .cell {
      background: #333;
      color: white;
    }

    .cell.selected {
      background-color: #a2d2ff;
    }

    body.dark .cell.selected {
      background-color: #555;
    }

    .cell.incorrect {
      background-color: #ff7b7b !important;
    }

    body.dark .cell.incorrect {
      background-color: #cc4444 !important;
    }

    /* Grube linie siatki co 3 pola */
    .cell:nth-child(9n+1),
    .cell:nth-child(9n+4),
    .cell:nth-child(9n+7) {
      border-left: 3px solid black;
    }
    .cell:nth-child(-n+9) {
      border-top: 3px solid black;
    }
    .cell:nth-child(n+19):nth-child(-n+27),
    .cell:nth-child(n+46):nth-child(-n+54),
    .cell:nth-child(n+73):nth-child(-n+81) {
      border-bottom: 1px solid #999;
    }
    .cell:nth-child(9n) {
      border-right: 3px solid black;
    }
    .cell:nth-child(n+1):nth-child(-n+9),
    .cell:nth-child(n+28):nth-child(-n+36),
    .cell:nth-child(n+55):nth-child(-n+63) {
      border-bottom: 3px solid black;
    }

    .side-panel {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }

    .numbers {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .num-btn {
      width: 60px;
      height: 60px;
      font-size: 22px;
      cursor: pointer;
      border: 1px solid #ccc;
      border-radius: 6px;
      background-color: #f0f0f0;
    }

    body.dark .num-btn {
      background-color: #444;
      color: white;
      border: 1px solid #777;
    }

    #info {
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <div>
      <label for="language">Jƒôzyk:</label>
      <select id="language">
        <option value="pl">Polski</option>
        <option value="en">English</option>
        <option value="fr">Fran√ßais</option>
        <option value="es">Espa√±ol</option>
        <option value="it">Italiano</option>
        <option value="pt">Portugu√™s</option>
        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
      </select>
    </div>
    <div>
      <label for="difficulty">Poziom:</label>
      <select id="difficulty">
        <option value="easy">≈Åatwy</option>
        <option value="medium">≈öredni</option>
        <option value="hard">Trudny</option>
      </select>
    </div>
    <div>
      <button id="newGame">Nowa gra</button>
      <button id="toggleTheme">üåô</button>
    </div>
  </div>

  <div class="game-container">
    <div class="board" id="board"></div>
    <div class="side-panel">
      <div class="numbers" id="numbers"></div>
      <div id="info">
        <p id="timer">Czas: 0s</p>
        <p id="mistakes">B≈Çƒôdy: 0/3</p>
        <p id="status"></p>
      </div>
    </div>
  </div>

  <script>
    const LANGUAGES = {
      pl: { newGame: "Nowa gra", mistakes: "B≈Çƒôdy", time: "Czas", won: "Wygra≈Çe≈õ!", lost: "Przegra≈Çe≈õ!" },
      en: { newGame: "New Game", mistakes: "Mistakes", time: "Time", won: "You won!", lost: "You lost!" },
      fr: { newGame: "Nouvelle partie", mistakes: "Erreurs", time: "Temps", won: "Tu as gagn√© !", lost: "Tu as perdu !" },
      es: { newGame: "Nuevo juego", mistakes: "Errores", time: "Tiempo", won: "¬°Ganaste!", lost: "¬°Perdiste!" },
      it: { newGame: "Nuova partita", mistakes: "Errori", time: "Tempo", won: "Hai vinto!", lost: "Hai perso!" },
      pt: { newGame: "Novo jogo", mistakes: "Erros", time: "Tempo", won: "Voc√™ venceu!", lost: "Voc√™ perdeu!" },
      ru: { newGame: "–ù–æ–≤–∞—è –∏–≥—Ä–∞", mistakes: "–û—à–∏–±–∫–∏", time: "–í—Ä–µ–º—è", won: "–¢—ã –≤—ã–∏–≥—Ä–∞–ª!", lost: "–¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª!" },
    };

    let boardElement = document.getElementById("board");
    let numbersElement = document.getElementById("numbers");
    let timerElement = document.getElementById("timer");
    let mistakesElement = document.getElementById("mistakes");
    let statusElement = document.getElementById("status");
    let languageSelect = document.getElementById("language");
    let difficultySelect = document.getElementById("difficulty");

    let selectedCell = null;
    let board = [];
    let solution = [];
    let mistakes = 0;
    let startTime;
    let timerInterval;
    let language = "pl";

    function startTimer() {
      startTime = Date.now();
      timerInterval = setInterval(() => {
        const seconds = Math.floor((Date.now() - startTime) / 1000);
        timerElement.textContent = `${LANGUAGES[language].time}: ${seconds}s`;
      }, 1000);
    }

    function stopTimer() {
      clearInterval(timerInterval);
    }

    function setLanguage(lang) {
      language = lang;
      document.getElementById("newGame").textContent = LANGUAGES[lang].newGame;
      mistakesElement.textContent = `${LANGUAGES[lang].mistakes}: ${mistakes}/3`;
    }

    function generateSudoku(difficulty = "easy") {
      board = Array(9).fill().map(() => Array(9).fill(""));
      solution = Array(9).fill().map(() => Array(9).fill().map(() => Math.floor(Math.random() * 9) + 1));
      for (let r = 0; r < 9; r++) {
        for (let c = 0; c < 9; c++) {
          if (Math.random() < (difficulty === "easy" ? 0.5 : difficulty === "medium" ? 0.35 : 0.25)) {
            board[r][c] = solution[r][c];
          }
        }
      }
    }

    function drawBoard() {
      boardElement.innerHTML = "";
      for (let r = 0; r < 9; r++) {
        for (let c = 0; c < 9; c++) {
          const cell = document.createElement("div");
          cell.classList.add("cell");
          if (board[r][c] !== "") {
            cell.textContent = board[r][c];
            cell.dataset.locked = "true";
          } else {
            cell.addEventListener("click", () => selectCell(cell, r, c));
          }
          cell.dataset.row = r;
          cell.dataset.col = c;
          boardElement.appendChild(cell);
        }
      }
    }

    function drawNumbers() {
      numbersElement.innerHTML = "";
      for (let i = 1; i <= 9; i++) {
        const btn = document.createElement("button");
        btn.classList.add("num-btn");
        btn.textContent = i;
        btn.addEventListener("click", () => placeNumber(i));
        numbersElement.appendChild(btn);
      }
    }

    function selectCell(cell, row, col) {
      if (selectedCell) selectedCell.classList.remove("selected");
      selectedCell = cell;
      cell.classList.add("selected");
    }

    function placeNumber(num) {
      if (!selectedCell || selectedCell.dataset.locked) return;
      const row = parseInt(selectedCell.dataset.row);
      const col = parseInt(selectedCell.dataset.col);
      if (solution[row][col] === num) {
        selectedCell.textContent = num;
        selectedCell.classList.remove("incorrect");
        selectedCell.dataset.locked = "true";
        selectedCell.removeEventListener("click", () => {});
        checkWin();
      } else {
        selectedCell.classList.add("incorrect");
        mistakes++;
        mistakesElement.textContent = `${LANGUAGES[language].mistakes}: ${mistakes}/3`;
        if (mistakes >= 3) {
          statusElement.textContent = LANGUAGES[language].lost;
          stopTimer();
        }
      }
    }

    function checkWin() {
      const allCells = document.querySelectorAll(".cell");
      for (const cell of allCells) {
        if (!cell.dataset.locked) return;
      }
      statusElement.textContent = LANGUAGES[language].won;
      stopTimer();
    }

    document.getElementById("newGame").addEventListener("click", () => {
      mistakes = 0;
      mistakesElement.textContent = `${LANGUAGES[language].mistakes}: 0/3`;
      statusElement.textContent = "";
      generateSudoku(difficultySelect.value);
      drawBoard();
      drawNumbers();
      startTimer();
    });

    languageSelect.addEventListener("change", (e) => {
      setLanguage(e.target.value);
    });

    document.getElementById("toggleTheme").addEventListener("click", () => {
      document.body.classList.toggle("dark");
    });

    setLanguage(language);
    generateSudoku("easy");
    drawBoard();
    drawNumbers();
    startTimer();
  </script>
</body>
</html>
